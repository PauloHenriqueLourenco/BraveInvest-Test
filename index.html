<html>

<head>
    <script src="jquery-3.3.1.min.js"></script>
    <script>
        var page = 1;

        while (page < 10) {

            const url = 'https://swapi.co/api/planets/?page=' + page;
            page++;

            $.getJSON(url, function (data) {

                var planetas = data.results.map((item) => { return item });

                var select = document.getElementById("planeta");

                for (var i = 0; i < planetas.length; i++) {
                    var planeta = planetas[i];
                    var el = document.createElement("option");
                    el.textContent = planeta.name;
                    el.value = planeta.url;

                    select.appendChild(el);
                }
            });
        }


        $(document).ready(function () {
            $('#buscar').click(function () {
                $('#residentes').html('');
                const url = $("#planeta option:selected").val();
                $.getJSON(url, function (data) {

                    var residentes = data.residents.map((item) => { return item });

                    for (var i = 0; i < residentes.length; i++) {
                        var residenteUrl = residentes[i];

                        $.getJSON(residenteUrl, function (data) {

                            $('#residentes').append('<li>' + data.name + '</li>');

                        });
                    }
                });
            });
        });
    </script>
</head>

<body>
    <select id="planeta"></select>
    <input type="button" id="buscar" value="Buscar">

    <ul id="residentes"></ul>
</body>

</html>